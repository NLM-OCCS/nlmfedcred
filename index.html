<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A command-line supported federated AWS authentication through NIH Login">
  <meta name="author" content="Dan Davis">
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>nlmfedcred</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "About";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> nlmfedcred</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">About</a>
    <ul class="current">
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="install/">Installation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="config/">Configuration</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="howto/">How To</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="trouble/">Trouble Shooting</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="smartcard/">Smartcard Utility</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">nlmfedcred</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>About</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>This module provides a command-line <code>getawscreds</code> that allows a user to assume a role in an AWS account based 
on their NIH Login account. On Windows, users can use their PIV card or password, but on other platforms, users
must use their username and password.  Service accounts also use a username and password.</p>
<h2 id="how-it-works">How it works</h2>
<p>The software requests your password or PIV PIN code, and then logs into
NIH login using these parameters. NIH login returns HTML that encodes what
accounts and roles you may become, along with a web form that would automatically
submit to AWS.  This software extracts the information, called a SAML Assertion, and presents 
it directly to the AWS API 
<a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html">sts:AssumeRoleWithSAML</a>.</p>
<p>That API returns temporary credentials, typically good for about an hour.  The software
writes these into the AWS CLI credential file <code>~/.aws/credentials</code>, or outputs the credentials 
for a bash shell or for Windows command-prompt (<code>cmd.exe</code>).</p>
<h2 id="named-profiles">Named Profiles</h2>
<p>A user may be granted the ability to authenticate to multiple roles on multiple accounts in AWS.
The information about which accounts and roles are available is encoded into
the SAML Assertion. Luckily, the AWS CLI and libraries support a concept
called <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html">Named Profiles</a> 
so that a user can manage the credentials for many profiles.</p>
<p>In order to know which federated role corresponds to which profile in which AWS
account, the <code>getawscreds</code> command-line read a configuration file.</p>
<h2 id="typical-usage">Typical Usage</h2>
<p>Once a configuration file is created, typical usage is to type:</p>
<pre><code class="language-bash">getawscreds -p profile --piv
</code></pre>
<p>or</p>
<pre><code class="language-bash">getawscreds -p profile
</code></pre>
<p>You will then be prompted as needed.</p>
<h2 id="working-with-ides">Working with IDEs</h2>
<p>Since the temporary credentials are written into the standard AWS
credentials file, <code>~/.aws/credentials</code>, working with an IDE is usually
as simple as specifying which AWS profile should be used.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install/" class="btn btn-neutral float-right" title="Installation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
        <span style="margin-left: 15px"><a href="install/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.1.2
Build Date UTC : 2021-01-25 20:38:50.936887+00:00
-->
